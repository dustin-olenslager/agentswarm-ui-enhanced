<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PI.DEV — Agent Architecture</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    background: #1e1e24;
    color: #fff;
    font-family: 'Inter', sans-serif;
    height: 100vh;
    overflow: hidden;
  }

  .slide {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  /* ── PI.DEV harness ── */
  .harness-box {
    position: relative;
    width: 680px;
    height: 440px;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 12px;
    background: rgba(255,255,255,0.02);
  }

  .harness-label {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.14em;
    color: #fff;
    background: #1e1e24;
    padding: 2px 16px;
    z-index: 10;
    white-space: nowrap;
  }

  /* ── Graph area ── */
  .graph {
    position: absolute;
    inset: 28px 24px;
  }

  /* ── SVG connectors ── */
  .connectors {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
  }

  .conn-line {
    stroke: rgba(255,255,255,0.35);
    stroke-width: 1;
    fill: none;
  }

  .conn-arrow {
    fill: rgba(255,255,255,0.4);
  }

  /* Recursive loop arcs */
  .recurse-arc {
    stroke: rgba(255,255,255,0.3);
    stroke-width: 1;
    fill: none;
    stroke-dasharray: 4 3;
  }

  .recurse-arrow {
    fill: rgba(255,255,255,0.35);
  }

  .particle {
    fill: rgba(255,255,255,0.6);
  }

  /* ── Nodes — clean white rectangles ── */
  .node {
    position: absolute;
    transform: translate(-50%, -50%);
    z-index: 2;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 7px 14px;
    border-radius: 3px;
    font-size: 12px;
    font-weight: 500;
    color: #fff;
    border: 1px solid rgba(255,255,255,0.25);
    background: rgba(255,255,255,0.06);
    white-space: nowrap;
    transition: all 0.2s;
  }

  .node:hover {
    border-color: rgba(255,255,255,0.45);
    background: rgba(255,255,255,0.1);
  }

  .node .tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 500;
    padding: 2px 6px;
    border-radius: 2px;
    letter-spacing: 0.04em;
  }

  .tag-gpt {
    color: #a5b4fc;
    background: rgba(165,180,252,0.12);
    border: 1px solid rgba(165,180,252,0.25);
  }

  .tag-glm {
    color: #86efac;
    background: rgba(134,239,172,0.1);
    border: 1px solid rgba(134,239,172,0.2);
  }

  .node-root {
    border-color: rgba(255,255,255,0.35);
    background: rgba(255,255,255,0.08);
    padding: 8px 18px;
    font-weight: 600;
  }

  .node-git {
    border-color: rgba(255,255,255,0.3);
    background: rgba(255,255,255,0.08);
    padding: 7px 22px;
    font-weight: 600;
  }

  /* ── Recurse badge — prominent ── */
  .recurse-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    padding: 2px 7px;
    border-radius: 2px;
    color: #e9d5ff;
    background: rgba(192,132,252,0.15);
    border: 1px solid rgba(192,132,252,0.3);
    letter-spacing: 0.03em;
  }

  .recurse-badge .icon {
    font-size: 12px;
  }

  /* ── Terminal bar ── */
  .terminal {
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 20px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 4px;
    background: rgba(255,255,255,0.03);
    z-index: 10;
  }

  .terminal-dots {
    display: flex;
    gap: 5px;
  }

  .terminal-dots span {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .td-r { background: #ff5f57; }
  .td-y { background: #febc2e; }
  .td-g { background: #28c840; }

  .terminal-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: rgba(255,255,255,0.5);
  }

  .terminal-text .hl { color: rgba(255,255,255,0.8); }
  .terminal-text .ok { color: #86efac; }

  .box-to-terminal {
    position: absolute;
    bottom: 52px;
    left: 50%;
    width: 1px;
    height: 24px;
    background: linear-gradient(to bottom, rgba(255,255,255,0.2), rgba(255,255,255,0.06));
    z-index: 5;
  }

  .box-to-terminal::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: -2px;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-top: 4px solid rgba(255,255,255,0.2);
  }
</style>
</head>
<body>
<div class="slide">

  <!--
    Tree (632 x 384 graph area):

    Level 0 ── Root Planner ────────── (316, 20)   GPT
                    │
               ┌────┴────┐
    Level 1 ─ Planner-A  Planner-B ── (158,86) (474,86)  GPT, recursive
               ┌──┴──┐    ┌──┴──┐
    Level 2 ─ W1    W2   W3    W4 ── GLM workers
           (90,158)(226,158)(406,158)(542,158)
               │     │     │     │
               └─────┴──┬──┴─────┘  merge bar y=228
                        │
    Level 3 ────────── Git ───────── (316, 280)
                        │
                     output
  -->

  <div class="harness-box">
    <div class="harness-label">PI.DEV HARNESS</div>

    <div class="graph">

      <svg class="connectors" viewBox="0 0 632 384" preserveAspectRatio="xMidYMid meet">
        <defs>
          <marker id="arrowDown" markerWidth="6" markerHeight="5" refX="3" refY="5" orient="auto">
            <polygon points="0,0 6,0 3,5" class="conn-arrow"/>
          </marker>
          <marker id="recurseArrow" markerWidth="5" markerHeight="4" refX="5" refY="2" orient="auto">
            <polygon points="0,0 5,2 0,4" class="recurse-arrow"/>
          </marker>
        </defs>

        <!-- ═══ Root Planner → 2 Planners ═══ -->
        <line x1="316" y1="36" x2="316" y2="50" class="conn-line"/>
        <line x1="158" y1="50" x2="474" y2="50" class="conn-line"/>
        <line x1="158" y1="50" x2="158" y2="70" class="conn-line" marker-end="url(#arrowDown)"/>
        <line x1="474" y1="50" x2="474" y2="70" class="conn-line" marker-end="url(#arrowDown)"/>

        <circle r="2" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" path="M316,36 L316,50 L158,50 L158,70"/>
        </circle>
        <circle r="2" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" begin="1s" path="M316,36 L316,50 L474,50 L474,70"/>
        </circle>

        <!-- ═══ Planner-A → 2 Workers ═══ -->
        <line x1="158" y1="102" x2="158" y2="116" class="conn-line"/>
        <line x1="90"  y1="116" x2="226" y2="116" class="conn-line"/>
        <line x1="90"  y1="116" x2="90"  y2="142" class="conn-line" marker-end="url(#arrowDown)"/>
        <line x1="226" y1="116" x2="226" y2="142" class="conn-line" marker-end="url(#arrowDown)"/>

        <circle r="1.5" class="particle">
          <animateMotion dur="1.8s" repeatCount="indefinite" begin="0.2s" path="M158,102 L158,116 L90,116 L90,142"/>
        </circle>
        <circle r="1.5" class="particle">
          <animateMotion dur="1.8s" repeatCount="indefinite" begin="1.1s" path="M158,102 L158,116 L226,116 L226,142"/>
        </circle>

        <!-- ═══ Planner-B → 2 Workers ═══ -->
        <line x1="474" y1="102" x2="474" y2="116" class="conn-line"/>
        <line x1="406" y1="116" x2="542" y2="116" class="conn-line"/>
        <line x1="406" y1="116" x2="406" y2="142" class="conn-line" marker-end="url(#arrowDown)"/>
        <line x1="542" y1="116" x2="542" y2="142" class="conn-line" marker-end="url(#arrowDown)"/>

        <circle r="1.5" class="particle">
          <animateMotion dur="1.8s" repeatCount="indefinite" begin="0.5s" path="M474,102 L474,116 L406,116 L406,142"/>
        </circle>
        <circle r="1.5" class="particle">
          <animateMotion dur="1.8s" repeatCount="indefinite" begin="1.4s" path="M474,102 L474,116 L542,116 L542,142"/>
        </circle>

        <!-- ═══ Recursive loops on Planner-A and Planner-B ═══ -->
        <!-- Planner-A: arc from right side looping back to top -->


        <!-- ═══ All 4 workers → merge bar (y=228) → Git ═══ -->
        <line x1="90"  y1="174" x2="90"  y2="228" class="conn-line" stroke-dasharray="3 3"/>
        <line x1="226" y1="174" x2="226" y2="228" class="conn-line" stroke-dasharray="3 3"/>
        <line x1="406" y1="174" x2="406" y2="228" class="conn-line" stroke-dasharray="3 3"/>
        <line x1="542" y1="174" x2="542" y2="228" class="conn-line" stroke-dasharray="3 3"/>
        <!-- Merge bar -->
        <line x1="90"  y1="228" x2="542" y2="228" class="conn-line"/>
        <!-- Trunk to Git -->
        <line x1="316" y1="228" x2="316" y2="264" class="conn-line" marker-end="url(#arrowDown)"/>

        <!-- Particles: merge to git -->
        <circle r="1.5" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" begin="0.3s" path="M90,174 L90,228 L316,228 L316,264"/>
        </circle>
        <circle r="1.5" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" begin="0.8s" path="M226,174 L226,228 L316,228 L316,264"/>
        </circle>
        <circle r="1.5" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" begin="1.3s" path="M406,174 L406,228 L316,228 L316,264"/>
        </circle>
        <circle r="1.5" class="particle">
          <animateMotion dur="2s" repeatCount="indefinite" begin="1.8s" path="M542,174 L542,228 L316,228 L316,264"/>
        </circle>

        <!-- Git → output -->
        <line x1="316" y1="296" x2="316" y2="384" class="conn-line" marker-end="url(#arrowDown)"/>
      </svg>

      <!-- ── Level 0: Root Planner ── -->
      <div class="node node-root" style="left:50%; top:20px;">
         Planner
        <span class="tag tag-gpt">GPT 5.2</span>
      </div>

      <!-- ── Level 1: Two Subplanners with recurse badges ── -->
      <div class="node" style="left:25%; top:86px;">
        Planner
        <span class="recurse-badge"><span class="icon">&#x21bb;</span> recursive</span>
        <span class="tag tag-gpt">GPT 5.2</span>
      </div>
      <div class="node" style="left:75%; top:86px;">
        Planner
        <span class="recurse-badge"><span class="icon">&#x21bb;</span> recursive</span>
        <span class="tag tag-gpt">GPT 5.2</span>
      </div>

      <!-- ── Level 2: Workers (2 under each Planner) ── -->
      <div class="node" style="left:14.2%; top:158px;">
        Worker <span class="tag tag-glm">GLM-5</span>
      </div>
      <div class="node" style="left:35.8%; top:158px;">
        Worker <span class="tag tag-glm">GLM-5</span>
      </div>
      <div class="node" style="left:64.2%; top:158px;">
        Worker <span class="tag tag-glm">GLM-5</span>
      </div>
      <div class="node" style="left:85.8%; top:158px;">
        Worker <span class="tag tag-glm">GLM-5</span>
      </div>

      <!-- ── Level 3: Git ── -->
      <div class="node node-git" style="left:50%; top:280px;">
        Git
      </div>

    </div>
  </div>

  <div class="box-to-terminal"></div>

  <div class="terminal">
    <div class="terminal-dots">
      <span class="td-r"></span>
      <span class="td-y"></span>
      <span class="td-g"></span>
    </div>
    <div class="terminal-text">
      <span class="hl">PI HARNESS</span> run &mdash; <span class="ok">4 workers active</span> &middot; main is green
    </div>
  </div>

</div>
</body>
</html>
